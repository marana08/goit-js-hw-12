{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"53360876-f97dd2c70b0e27b498deb3edc\";\n\nexport async function getImagesByQuery(query, page) {\n    const params = {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: 15, \n    };\n\n    const { data } = await axios.get(BASE_URL, { params });\n    return data;\n}\n\n\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst galleryContainer = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nexport const lightbox = new SimpleLightbox(\".gallery a\", {\n    captionsData: \"alt\",\n    captionDelay: 250,\n});\n\nexport function createGallery(images) {\n    const markup = images\n        .map(\n            (img) => `\n            <a class=\"gallery-item\" href=\"${img.largeImageURL}\">\n                <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n                <div class=\"info\">\n                    <p><b>Likes:</b> ${img.likes}</p>\n                    <p><b>Views:</b> ${img.views}</p>\n                    <p><b>Comments:</b> ${img.comments}</p>\n                    <p><b>Downloads:</b> ${img.downloads}</p>\n                </div>\n            </a>`\n        )\n        .join(\"\");\n\n    galleryContainer.insertAdjacentHTML(\"beforeend\", markup);\n\n    lightbox.refresh();\n}\n\nexport function clearGallery() {\n    galleryContainer.innerHTML = \"\";\n}\n\nexport function showLoader() {\n    loader.classList.remove(\"hidden\");\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"hidden\");\n}\n\nexport function showLoadMoreButton() {\n    loadMoreBtn.classList.remove(\"hidden\");\n}\n\nexport function hideLoadMoreButton() {\n    loadMoreBtn.classList.add(\"hidden\");\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getImagesByQuery } from \"./js/pixabay-api\";\nimport {\n    createGallery,\n    clearGallery,\n    showLoader,\n    hideLoader,\n    showLoadMoreButton,\n    hideLoadMoreButton\n} from \"./js/render-functions\";\n\nconst form = document.querySelector(\".form\");\nconst input = document.querySelector(\"input[name='search-text']\");\nconst loadMoreBtn = document.querySelector(\".load-more\");\n\nlet query = \"\";\nlet page = 1;\nconst PER_PAGE = 15;\n\n// Події\nform.addEventListener(\"submit\", onSearch);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\n// =============================\n//  Пошук\n// =============================\nasync function onSearch(event) {\n    event.preventDefault();\n\n    query = input.value.trim();\n    page = 1;\n\n    if (!query) {\n        iziToast.warning({\n            title: \"Warning\",\n            message: \"Please enter a search query!\",\n            timeout: 2000,\n        });\n        return;\n    }\n\n    clearGallery();\n    hideLoadMoreButton();\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n\n        if (!data.hits.length) {\n            iziToast.error({\n                title: \"No results\",\n                message: \"Sorry, no images match your search query.\",\n            });\n            return;\n        }\n\n        createGallery(data.hits);\n\n        if (data.totalHits <= PER_PAGE) {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: \"End\",\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n            // return;\n        }\n\n        showLoadMoreButton();\n\n    } catch (error) {\n        showError();\n    } finally {\n        hideLoader();\n    }\n}\n\n// =============================\n//  Завантаження додаткових зображень\n// =============================\nasync function onLoadMore() {\n    page++;\n    showLoader();\n\n    try {\n        const data = await getImagesByQuery(query, page);\n        createGallery(data.hits);\n\n        smoothScroll();\n\n        // Кінець результатів\n        if (page * PER_PAGE >= data.totalHits) {\n            hideLoadMoreButton();\n            iziToast.info({\n                title: \"End\",\n                message:  \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n\n    } catch (error) {\n        showError();\n    } finally {\n        hideLoader();\n    }\n}\n\n// =============================\n//  Допоміжні функції\n// =============================\nfunction smoothScroll() {\n    const firstCard = document\n        .querySelector(\".gallery\")\n        ?.firstElementChild;\n\n    if (!firstCard) return;\n\n    const cardHeight = firstCard.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: \"smooth\",\n    });\n}\n\nfunction showError() {\n    iziToast.error({\n        title: \"Error\",\n        message: \"Something went wrong. Try again later.\",\n    });\n}\n\n"],"names":["BASE_URL","API_KEY","getImagesByQuery","query","page","params","data","axios","galleryContainer","loader","loadMoreBtn","lightbox","SimpleLightbox","createGallery","images","markup","img","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","input","PER_PAGE","onSearch","onLoadMore","event","iziToast","showError","smoothScroll","firstCard","_a","cardHeight"],"mappings":"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"}